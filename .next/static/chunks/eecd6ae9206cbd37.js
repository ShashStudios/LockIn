(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},3053,e=>{"use strict";let t="lockin_active_session",s="lockin_history",r="lockin_preferences";function n(e){try{return localStorage.getItem(e)}catch{return null}}function a(e,t){try{localStorage.setItem(e,t)}catch{console.warn("Failed to write to localStorage")}}function l(){let e=n(t);if(!e)return null;try{let t=JSON.parse(e),s=t.startTime+60*t.duration*1e3;if(Date.now()>s)return c(),null;return t}catch{return null}}function i(e){a(t,JSON.stringify(e))}function c(){try{localStorage.removeItem(t)}catch{console.warn("Failed to remove from localStorage")}}function o(){let e=l();if(!e)return 0;let t=e.quitAttempts+1;return i({...e,quitAttempts:t}),t}function u(){let e=n(s);if(!e)return[];try{return JSON.parse(e)}catch{return[]}}function d(e){let t=u();a(s,JSON.stringify([{...e,timestamp:Date.now()},...t].slice(0,100)))}function m(){let e=n(r),t={brownNoise:!1,brownNoiseVolume:.5,lastDuration:25};if(!e)return t;try{return{...t,...JSON.parse(e)}}catch{return t}}function f(e){a(r,JSON.stringify({...m(),...e}))}function h(e){return Math.ceil(Math.max(0,e.startTime+60*e.duration*1e3-Date.now())/1e3)}function x(e){return 0>=h(e)}e.s(["addToHistory",()=>d,"clearActiveSession",()=>c,"getActiveSession",()=>l,"getHistory",()=>u,"getPreferences",()=>m,"getRemainingTime",()=>h,"incrementQuitAttempts",()=>o,"isSessionComplete",()=>x,"setActiveSession",()=>i,"setPreferences",()=>f])},73842,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),n=e.i(75157);function a({seconds:e,className:s}){return(0,t.jsx)("div",{className:(0,n.cn)("timer-display text-8xl md:text-9xl font-light text-white tracking-tight",s),children:(0,n.formatTime)(e)})}function l({progress:e,size:s=300,strokeWidth:r=4,className:a}){let l=(s-r)/2,i=2*l*Math.PI;return(0,t.jsx)("div",{className:(0,n.cn)("relative",a),style:{width:s,height:s},children:(0,t.jsxs)("svg",{className:"transform -rotate-90",width:s,height:s,children:[(0,t.jsx)("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:r,className:"text-surface-800"}),(0,t.jsx)("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:r,strokeLinecap:"round",className:"text-primary-500 progress-ring-circle",style:{strokeDasharray:i,strokeDashoffset:i-e/100*i}})]})})}function i({isOpen:e,onClose:r,children:a,className:l,showCloseButton:i=!1}){let c=(0,s.useCallback)(e=>{"Escape"===e.key&&r()},[r]);return((0,s.useEffect)(()=>(e&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}),[e,c]),e)?(0,t.jsx)("div",{className:"modal-backdrop flex items-center justify-center p-4 animate-fade-in",children:(0,t.jsxs)("div",{className:(0,n.cn)("relative w-full max-w-md glass rounded-2xl p-6 animate-scale-in",l),onClick:e=>e.stopPropagation(),children:[i&&(0,t.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-surface-400 hover:text-white transition-colors","aria-label":"Close modal",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a]})}):null}var c=e.i(59544);let o="LOCK IN",u=["You're closer than you think.","The best work happens in the last stretch.","This moment of resistance is where growth lives.","One more push. You've got this."];function d({isOpen:e,onClose:r,onConfirmQuit:n,isPro:a=!1}){let[l,d]=(0,s.useState)(12),[m,f]=(0,s.useState)(""),[h,x]=(0,s.useState)(0),p=a?15:12,v=l<=0&&m.toUpperCase()===o;(0,s.useEffect)(()=>{e&&(d(p),f(""),x(0))},[e,p]),(0,s.useEffect)(()=>{if(!e||l<=0)return;let t=setInterval(()=>{d(e=>Math.max(0,e-1))},1e3);return()=>clearInterval(t)},[e,l]),(0,s.useEffect)(()=>{if(!e||l<=0)return;let t=setInterval(()=>{x(e=>(e+1)%u.length)},3e3);return()=>clearInterval(t)},[e,l]);let g=(0,s.useCallback)(()=>{v&&n()},[v,n]);return(0,t.jsx)(i,{isOpen:e,onClose:r,children:(0,t.jsxs)("div",{className:"text-center space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Are you quitting for a real reason?"}),(0,t.jsx)("p",{className:"text-surface-400 text-sm",children:"Taking breaks is fine. Giving up isn't."})]}),l>0&&(0,t.jsxs)("div",{className:"py-6",children:[(0,t.jsx)("p",{className:"text-primary-400 text-lg font-medium animate-pulse-soft",children:u[h]}),(0,t.jsxs)("p",{className:"text-surface-500 text-sm mt-4",children:["Confirm available in ",l,"s"]})]}),l<=0&&(0,t.jsxs)("div",{className:"space-y-3 py-4",children:[(0,t.jsxs)("p",{className:"text-surface-300 text-sm",children:["Type ",(0,t.jsx)("span",{className:"font-mono font-bold text-white",children:o})," to confirm:"]}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value),placeholder:"Type here...",className:"w-full px-4 py-3 bg-surface-800 border border-surface-600 rounded-xl text-center text-white placeholder:text-surface-500 focus:outline-none focus:border-primary-500 font-mono uppercase tracking-widest",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)(c.Button,{variant:"secondary",className:"flex-1",onClick:r,children:"Keep Going"}),(0,t.jsx)(c.Button,{variant:"danger",className:"flex-1",disabled:!v,onClick:g,children:l>0?`Wait ${l}s`:v?"Quit Session":"Type to confirm"})]})]})})}function m({isPlaying:e,volume:r=.5,showVolumeControl:n=!1,onVolumeChange:a}){let l=(0,s.useRef)(null),[i,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>(l.current=new Audio("/brown-noise.mp3"),l.current.loop=!0,l.current.volume=r,l.current.addEventListener("canplaythrough",()=>{c(!0)}),()=>{l.current&&(l.current.pause(),l.current=null)}),[]),(0,s.useEffect)(()=>{l.current&&(e&&i?l.current.play().catch(e=>{console.warn("Audio play failed:",e)}):l.current.pause())},[e,i]),(0,s.useEffect)(()=>{l.current&&(l.current.volume=r)},[r]);let o=(0,s.useCallback)(e=>{let t=parseFloat(e.target.value);a?.(t)},[a]);return n?(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("svg",{className:"w-4 h-4 text-surface-400",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{d:"M11.5 3.75a.75.75 0 00-1.24-.57L6.01 7H4a1 1 0 00-1 1v8a1 1 0 001 1h2.01l4.25 3.82a.75.75 0 001.24-.57V3.75z"}),r>0&&(0,t.jsx)("path",{d:"M14.5 7.5a.75.75 0 011.06 0 5.5 5.5 0 010 7.78.75.75 0 11-1.06-1.06 4 4 0 000-5.66.75.75 0 010-1.06z"}),r>.5&&(0,t.jsx)("path",{d:"M17.5 4.5a.75.75 0 011.06 0 9.5 9.5 0 010 13.43.75.75 0 01-1.06-1.06 8 8 0 000-11.31.75.75 0 010-1.06z"})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:r,onChange:o,className:"w-24 h-1 bg-surface-700 rounded-lg appearance-none cursor-pointer accent-primary-500"})]}):null}var f=e.i(3053);function h(){let e=(0,r.useRouter)(),{seconds:n,isComplete:i,progress:o}=function(){let[e,t]=(0,s.useState)(0),[r,n]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)(0),o=(0,s.useRef)(null),u=(0,s.useCallback)(()=>{let e=(0,f.getActiveSession)();if(!e){l(!1),t(0);return}l(!0),c(60*e.duration),(0,f.isSessionComplete)(e)?(n(!0),t(0),l(!1)):(t((0,f.getRemainingTime)(e)),n(!1))},[]);return(0,s.useEffect)(()=>{u(),o.current=setInterval(u,1e3);let e=()=>{"visible"===document.visibilityState&&u()};return document.addEventListener("visibilitychange",e),()=>{o.current&&clearInterval(o.current),document.removeEventListener("visibilitychange",e)}},[u]),{seconds:e,isComplete:r,isRunning:a,progress:i>0?(i-e)/i*100:0}}(),{enterFullscreen:u,exitFullscreen:h,isSupported:x}=function(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n(!!document.documentElement.requestFullscreen);let e=()=>{t(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]);let a=(0,s.useCallback)(async()=>{if(r)try{await document.documentElement.requestFullscreen()}catch(e){console.warn("Failed to enter fullscreen:",e)}},[r]),l=(0,s.useCallback)(async()=>{if(document.fullscreenElement)try{await document.exitFullscreen()}catch(e){console.warn("Failed to exit fullscreen:",e)}},[]),i=(0,s.useCallback)(async()=>{e?await l():await a()},[e,a,l]);return{isFullscreen:e,enterFullscreen:a,exitFullscreen:l,toggleFullscreen:i,isSupported:r}}(),[p,v]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[j,w]=(0,s.useState)(.5),[N,b]=(0,s.useState)(!1),[S,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(0);(0,s.useEffect)(()=>{k(!0);let t=(0,f.getActiveSession)();if(!t)return void e.push("/");if(y(t.brownNoise),E(t.duration),w((0,f.getPreferences)().brownNoiseVolume||.5),x){let e=setTimeout(()=>{u()},500);return()=>clearTimeout(e)}},[e,u,x]),(0,s.useEffect)(()=>{i&&S&&((0,f.addToHistory)({date:new Date().toISOString().split("T")[0],duration:C,completed:!0}),(0,f.clearActiveSession)(),h(),e.push("/complete"))},[i,S,C,h,e]);let T=(0,s.useCallback)(()=>{(0,f.incrementQuitAttempts)(),v(!0)},[]),A=(0,s.useCallback)(()=>{(0,f.addToHistory)({date:new Date().toISOString().split("T")[0],duration:C,completed:!1}),(0,f.clearActiveSession)(),h(),e.push("/")},[C,h,e]),L=(0,s.useCallback)(e=>{w(e),(0,f.setPreferences)({brownNoiseVolume:e})},[]);return S?(0,t.jsxs)("div",{className:"focus-mode",children:[(0,t.jsx)(m,{isPlaying:g,volume:j,showVolumeControl:N,onVolumeChange:L}),(0,t.jsxs)("div",{className:"relative flex flex-col items-center justify-center gap-8 animate-fade-in",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l,{progress:o,size:320,strokeWidth:4}),(0,t.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,t.jsx)(a,{seconds:n})})]}),(0,t.jsx)("p",{className:"text-surface-400 text-lg md:text-xl text-center max-w-md breathing",children:"Stay locked. Finish what you started."}),g&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-surface-500 text-sm",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{d:"M11.5 3.75a.75.75 0 00-1.24-.57L6.01 7H4a1 1 0 00-1 1v8a1 1 0 001 1h2.01l4.25 3.82a.75.75 0 001.24-.57V3.75z"}),(0,t.jsx)("path",{d:"M14.5 7.5a.75.75 0 011.06 0 5.5 5.5 0 010 7.78.75.75 0 11-1.06-1.06 4 4 0 000-5.66.75.75 0 010-1.06z"})]}),(0,t.jsx)("span",{children:"Brown noise playing"}),N&&(0,t.jsx)(m,{isPlaying:!1,volume:j,showVolumeControl:!0,onVolumeChange:L})]})]}),(0,t.jsx)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2",children:(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:T,className:"text-surface-600 hover:text-surface-400",children:"Quit session"})}),(0,t.jsx)(d,{isOpen:p,onClose:()=>v(!1),onConfirmQuit:A,isPro:N})]}):(0,t.jsx)("div",{className:"focus-mode",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})}e.s(["default",()=>h],73842)}]);
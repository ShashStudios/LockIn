module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},71196,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(68114);function f({seconds:a,className:c}){return(0,b.jsx)("div",{className:(0,e.cn)("timer-display text-8xl md:text-9xl font-light text-white tracking-tight",c),children:(0,e.formatTime)(a)})}function g({progress:a,size:c=300,strokeWidth:d=4,className:f}){let g=(c-d)/2,h=2*g*Math.PI;return(0,b.jsx)("div",{className:(0,e.cn)("relative",f),style:{width:c,height:c},children:(0,b.jsxs)("svg",{className:"transform -rotate-90",width:c,height:c,children:[(0,b.jsx)("circle",{cx:c/2,cy:c/2,r:g,fill:"none",stroke:"currentColor",strokeWidth:d,className:"text-surface-800"}),(0,b.jsx)("circle",{cx:c/2,cy:c/2,r:g,fill:"none",stroke:"currentColor",strokeWidth:d,strokeLinecap:"round",className:"text-primary-500 progress-ring-circle",style:{strokeDasharray:h,strokeDashoffset:h-a/100*h}})]})})}function h({isOpen:a,onClose:d,children:f,className:g,showCloseButton:h=!1}){let i=(0,c.useCallback)(a=>{"Escape"===a.key&&d()},[d]);return((0,c.useEffect)(()=>(a&&(document.addEventListener("keydown",i),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",i),document.body.style.overflow="unset"}),[a,i]),a)?(0,b.jsx)("div",{className:"modal-backdrop flex items-center justify-center p-4 animate-fade-in",children:(0,b.jsxs)("div",{className:(0,e.cn)("relative w-full max-w-md glass rounded-2xl p-6 animate-scale-in",g),onClick:a=>a.stopPropagation(),children:[h&&(0,b.jsx)("button",{onClick:d,className:"absolute top-4 right-4 text-surface-400 hover:text-white transition-colors","aria-label":"Close modal",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f]})}):null}var i=a.i(96438);let j="LOCK IN",k=["You're closer than you think.","The best work happens in the last stretch.","This moment of resistance is where growth lives.","One more push. You've got this."];function l({isOpen:a,onClose:d,onConfirmQuit:e,isPro:f=!1}){let[g,l]=(0,c.useState)(12),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(0),q=f?15:12,r=g<=0&&m.toUpperCase()===j;(0,c.useEffect)(()=>{a&&(l(q),n(""),p(0))},[a,q]),(0,c.useEffect)(()=>{if(!a||g<=0)return;let b=setInterval(()=>{l(a=>Math.max(0,a-1))},1e3);return()=>clearInterval(b)},[a,g]),(0,c.useEffect)(()=>{if(!a||g<=0)return;let b=setInterval(()=>{p(a=>(a+1)%k.length)},3e3);return()=>clearInterval(b)},[a,g]);let s=(0,c.useCallback)(()=>{r&&e()},[r,e]);return(0,b.jsx)(h,{isOpen:a,onClose:d,children:(0,b.jsxs)("div",{className:"text-center space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Are you quitting for a real reason?"}),(0,b.jsx)("p",{className:"text-surface-400 text-sm",children:"Taking breaks is fine. Giving up isn't."})]}),g>0&&(0,b.jsxs)("div",{className:"py-6",children:[(0,b.jsx)("p",{className:"text-primary-400 text-lg font-medium animate-pulse-soft",children:k[o]}),(0,b.jsxs)("p",{className:"text-surface-500 text-sm mt-4",children:["Confirm available in ",g,"s"]})]}),g<=0&&(0,b.jsxs)("div",{className:"space-y-3 py-4",children:[(0,b.jsxs)("p",{className:"text-surface-300 text-sm",children:["Type ",(0,b.jsx)("span",{className:"font-mono font-bold text-white",children:j})," to confirm:"]}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),placeholder:"Type here...",className:"w-full px-4 py-3 bg-surface-800 border border-surface-600 rounded-xl text-center text-white placeholder:text-surface-500 focus:outline-none focus:border-primary-500 font-mono uppercase tracking-widest",autoFocus:!0})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(i.Button,{variant:"secondary",className:"flex-1",onClick:d,children:"Keep Going"}),(0,b.jsx)(i.Button,{variant:"danger",className:"flex-1",disabled:!r,onClick:s,children:g>0?`Wait ${g}s`:r?"Quit Session":"Type to confirm"})]})]})})}function m({isPlaying:a,volume:d=.5,showVolumeControl:e=!1,onVolumeChange:f}){let g=(0,c.useRef)(null),[h,i]=(0,c.useState)(!1);(0,c.useEffect)(()=>(g.current=new Audio("/brown-noise.mp3"),g.current.loop=!0,g.current.volume=d,g.current.addEventListener("canplaythrough",()=>{i(!0)}),()=>{g.current&&(g.current.pause(),g.current=null)}),[]),(0,c.useEffect)(()=>{g.current&&(a&&h?g.current.play().catch(a=>{console.warn("Audio play failed:",a)}):g.current.pause())},[a,h]),(0,c.useEffect)(()=>{g.current&&(g.current.volume=d)},[d]);let j=(0,c.useCallback)(a=>{let b=parseFloat(a.target.value);f?.(b)},[f]);return e?(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("svg",{className:"w-4 h-4 text-surface-400",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{d:"M11.5 3.75a.75.75 0 00-1.24-.57L6.01 7H4a1 1 0 00-1 1v8a1 1 0 001 1h2.01l4.25 3.82a.75.75 0 001.24-.57V3.75z"}),d>0&&(0,b.jsx)("path",{d:"M14.5 7.5a.75.75 0 011.06 0 5.5 5.5 0 010 7.78.75.75 0 11-1.06-1.06 4 4 0 000-5.66.75.75 0 010-1.06z"}),d>.5&&(0,b.jsx)("path",{d:"M17.5 4.5a.75.75 0 011.06 0 9.5 9.5 0 010 13.43.75.75 0 01-1.06-1.06 8 8 0 000-11.31.75.75 0 010-1.06z"})]}),(0,b.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:j,className:"w-24 h-1 bg-surface-700 rounded-lg appearance-none cursor-pointer accent-primary-500"})]}):null}var n=a.i(76808);function o(){let a=(0,d.useRouter)(),{seconds:e,isComplete:h,progress:j}=function(){let[a,b]=(0,c.useState)(0),[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(0),j=(0,c.useRef)(null),k=(0,c.useCallback)(()=>{let a=(0,n.getActiveSession)();if(!a){g(!1),b(0);return}g(!0),i(60*a.duration),(0,n.isSessionComplete)(a)?(e(!0),b(0),g(!1)):(b((0,n.getRemainingTime)(a)),e(!1))},[]);return(0,c.useEffect)(()=>{k(),j.current=setInterval(k,1e3);let a=()=>{"visible"===document.visibilityState&&k()};return document.addEventListener("visibilitychange",a),()=>{j.current&&clearInterval(j.current),document.removeEventListener("visibilitychange",a)}},[k]),{seconds:a,isComplete:d,isRunning:f,progress:h>0?(h-a)/h*100:0}}(),{enterFullscreen:k,exitFullscreen:o,isSupported:p}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(!1);(0,c.useEffect)(()=>{e(!!document.documentElement.requestFullscreen);let a=()=>{b(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",a),()=>{document.removeEventListener("fullscreenchange",a)}},[]);let f=(0,c.useCallback)(async()=>{if(d)try{await document.documentElement.requestFullscreen()}catch(a){console.warn("Failed to enter fullscreen:",a)}},[d]),g=(0,c.useCallback)(async()=>{if(document.fullscreenElement)try{await document.exitFullscreen()}catch(a){console.warn("Failed to exit fullscreen:",a)}},[]),h=(0,c.useCallback)(async()=>{a?await g():await f()},[a,f,g]);return{isFullscreen:a,enterFullscreen:f,exitFullscreen:g,toggleFullscreen:h,isSupported:d}}(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(.5),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(0);(0,c.useEffect)(()=>{z(!0);let b=(0,n.getActiveSession)();if(!b)return void a.push("/");if(t(b.brownNoise),B(b.duration),v((0,n.getPreferences)().brownNoiseVolume||.5),p){let a=setTimeout(()=>{k()},500);return()=>clearTimeout(a)}},[a,k,p]),(0,c.useEffect)(()=>{h&&y&&((0,n.addToHistory)({date:new Date().toISOString().split("T")[0],duration:A,completed:!0}),(0,n.clearActiveSession)(),o(),a.push("/complete"))},[h,y,A,o,a]);let C=(0,c.useCallback)(()=>{(0,n.incrementQuitAttempts)(),r(!0)},[]),D=(0,c.useCallback)(()=>{(0,n.addToHistory)({date:new Date().toISOString().split("T")[0],duration:A,completed:!1}),(0,n.clearActiveSession)(),o(),a.push("/")},[A,o,a]),E=(0,c.useCallback)(a=>{v(a),(0,n.setPreferences)({brownNoiseVolume:a})},[]);return y?(0,b.jsxs)("div",{className:"focus-mode",children:[(0,b.jsx)(m,{isPlaying:s,volume:u,showVolumeControl:w,onVolumeChange:E}),(0,b.jsxs)("div",{className:"relative flex flex-col items-center justify-center gap-8 animate-fade-in",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g,{progress:j,size:320,strokeWidth:4}),(0,b.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,b.jsx)(f,{seconds:e})})]}),(0,b.jsx)("p",{className:"text-surface-400 text-lg md:text-xl text-center max-w-md breathing",children:"Stay locked. Finish what you started."}),s&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-surface-500 text-sm",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{d:"M11.5 3.75a.75.75 0 00-1.24-.57L6.01 7H4a1 1 0 00-1 1v8a1 1 0 001 1h2.01l4.25 3.82a.75.75 0 001.24-.57V3.75z"}),(0,b.jsx)("path",{d:"M14.5 7.5a.75.75 0 011.06 0 5.5 5.5 0 010 7.78.75.75 0 11-1.06-1.06 4 4 0 000-5.66.75.75 0 010-1.06z"})]}),(0,b.jsx)("span",{children:"Brown noise playing"}),w&&(0,b.jsx)(m,{isPlaying:!1,volume:u,showVolumeControl:!0,onVolumeChange:E})]})]}),(0,b.jsx)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2",children:(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:C,className:"text-surface-600 hover:text-surface-400",children:"Quit session"})}),(0,b.jsx)(l,{isOpen:q,onClose:()=>r(!1),onConfirmQuit:D,isPro:w})]}):(0,b.jsx)("div",{className:"focus-mode",children:(0,b.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})}a.s(["default",()=>o],71196)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c2f104a1._.js.map